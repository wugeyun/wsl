<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PDF.js Viewer</title>
<style>
  /* 设置 PDF 容器的样式 */
  #pdf-viewer {
    width: 100%;
    height: 600px;
    border: 1px solid #ccc;
  }
</style>
</head>
<body>

<!-- PDF.js 容器 -->
<div id="pdf-viewer"></div>

<!-- 引入 PDF.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.entry.min.js"></script>
<script>
  // 设置 PDF.js 的 worker 路径
  pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.6.347/pdf.worker.min.js';

  // 获取 PDF 文件的 URL
  const pdfUrl = 'kings0-1.pdf';

  // 获取 PDF 容器元素
  const pdfViewer = document.getElementById('pdf-viewer');

  // 初始化 PDF.js 文档对象
  const loadingTask = pdfjsLib.getDocument(pdfUrl);

  // 等待 PDF 文档加载
  loadingTask.promise.then(function(pdf) {
    console.log('PDF loaded');

    // 遍历 PDF 文档的所有页面
    pdf.getPage(1).then(function(page) {
      console.log('Page loaded');

      // 设置页面渲染的规模
      const scale = 1.5;
      const viewport = page.getViewport({ scale: scale });

      // 获取容器的尺寸
      const canvas = document.createElement('canvas');
      const context = canvas.getContext('2d');
      canvas.height = viewport.height;
      canvas.width = viewport.width;

      // 将 canvas 元素添加到容器中
      pdfViewer.appendChild(canvas);

      // 渲染 PDF 页面
      const renderContext = {
        canvasContext: context,
        viewport: viewport
      };
      page.render(renderContext);
    });
  }, function(reason) {
    // PDF 加载失败
    console.error('PDF loading error: ' + reason);
  });
</script>

</body>
</html>